"use client";

import React, { forwardRef, useRef } from "react";

import { cn } from "@/lib/utils";
import { AnimatedBeam } from "../components/ui/animated-beam";

const Circle = forwardRef<
  HTMLDivElement,
  { className?: string; children?: React.ReactNode }
>(({ className, children }, ref) => {
  return (
    <div
      ref={ref}
      className={cn(
        "z-10 flex size-12 items-center justify-center rounded-full border-2 bg-white p-3 shadow-[0_0_20px_-12px_rgba(0,0,0,0.8)]",
        className
      )}
    >
      {children}
    </div>
  );
});

Circle.displayName = "Circle";

export function AnimatedBeamDemo() {
  const containerRef = useRef<HTMLDivElement>(null);
  const div1Ref = useRef<HTMLDivElement>(null);
  const div2Ref = useRef<HTMLDivElement>(null);
  const div3Ref = useRef<HTMLDivElement>(null);
  const div4Ref = useRef<HTMLDivElement>(null);
  const div5Ref = useRef<HTMLDivElement>(null);
  const div6Ref = useRef<HTMLDivElement>(null);
  const div7Ref = useRef<HTMLDivElement>(null);

  return (
    <div
      className="relative flex h-[500px] w-full items-center justify-center overflow-hidden rounded-lg bg-[#010101] bg-background p-10 md:shadow-xl"
      ref={containerRef}
    >
      <div className="flex size-full flex-col max-w-lg max-h-[200px] items-stretch justify-between gap-10">
        <div className="flex flex-row items-center justify-between">
          <Circle ref={div1Ref}>
            <Icons.tradestation />
          </Circle>
          <Circle ref={div5Ref}>
            <Icons.tradingview />
          </Circle>
        </div>
        <div className="flex flex-row items-center justify-between">
          <Circle ref={div2Ref}>
            <Icons.amibroker />
          </Circle>
          <Circle ref={div4Ref} className="size-16">
            <Icons.foxtraa />
          </Circle>
          <Circle ref={div6Ref}>
            <Icons.babypips />
          </Circle>
        </div>
        <div className="flex flex-row items-center justify-between">
          <Circle ref={div3Ref}>
            <Icons.ninjatrader />
          </Circle>
          <Circle ref={div7Ref}>
            <Icons.multicharts />
          </Circle>
        </div>
      </div>

      <AnimatedBeam
        containerRef={containerRef}
        fromRef={div1Ref}
        toRef={div4Ref}
        curvature={-75}
        endYOffset={-10}
      />
      <AnimatedBeam
        containerRef={containerRef}
        fromRef={div2Ref}
        toRef={div4Ref}
      />
      <AnimatedBeam
        containerRef={containerRef}
        fromRef={div3Ref}
        toRef={div4Ref}
        curvature={75}
        endYOffset={10}
      />
      <AnimatedBeam
        containerRef={containerRef}
        fromRef={div5Ref}
        toRef={div4Ref}
        curvature={-75}
        endYOffset={-10}
        reverse
      />
      <AnimatedBeam
        containerRef={containerRef}
        fromRef={div6Ref}
        toRef={div4Ref}
        reverse
      />
      <AnimatedBeam
        containerRef={containerRef}
        fromRef={div7Ref}
        toRef={div4Ref}
        curvature={75}
        endYOffset={10}
        reverse
      />
    </div>
  );
}

const Icons = {
  amibroker: () => (
    <svg
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      width="100"
      height="100"
      viewBox="0 0 100 100"
    >
      <path
        d="M0 0 C0.66 0 1.32 0 2 0 C2.43155396 0.89356201 2.43155396 0.89356201 2.87182617 1.80517578 C6.07649961 8.33882823 9.6063081 14.61487703 13.3125 20.875 C18.97491103 30.50571217 24.54666288 40.18321846 30.0687561 49.89465332 C35.3289694 59.14048793 40.69258115 68.32014737 46.19165039 77.42626953 C46.69559326 78.26786621 47.19953613 79.10946289 47.71875 79.9765625 C48.16154297 80.70955566 48.60433594 81.44254883 49.06054688 82.19775391 C50 84 50 84 50 86 C17.33 86 -15.34 86 -49 86 C-42.17527603 72.35055205 -42.17527603 72.35055205 -38.5625 66.375 C-37.6915806 64.91343182 -36.82187049 63.45114263 -35.953125 61.98828125 C-35.48326172 61.19760254 -35.01339844 60.40692383 -34.52929688 59.59228516 C-31.58647473 54.60395733 -28.70269085 49.58144121 -25.8125 44.5625 C-25.18384033 43.47155029 -24.55518066 42.38060059 -23.9074707 41.2565918 C-22.27527668 38.42367965 -20.64356766 35.59048884 -19.01202393 32.75720215 C-16.25628938 27.97235217 -13.49865379 23.18859829 -10.74032593 18.40524292 C-9.77156009 16.72489647 -8.80337594 15.04421471 -7.83520508 13.36352539 C-7.24505615 12.3399292 -6.65490723 11.31633301 -6.046875 10.26171875 C-5.27102051 8.91533325 -5.27102051 8.91533325 -4.47949219 7.54174805 C-3.99125977 6.70297119 -3.50302734 5.86419434 -3 5 C-2.4834082 4.06647705 -1.96681641 3.1329541 -1.43457031 2.17114258 C-0.96116211 1.45466553 -0.48775391 0.73818848 0 0 Z "
        fill="#830000"
        transform="translate(49,13)"
      />
      <path
        d="M0 0 C0.66 0 1.32 0 2 0 C2.43699219 0.89138672 2.43699219 0.89138672 2.8828125 1.80078125 C6.09351045 8.29285288 9.49412364 14.66291765 13 21 C11.94419641 22.1105715 10.87998389 23.21315091 9.8125 24.3125 C9.22082031 24.92738281 8.62914062 25.54226562 8.01953125 26.17578125 C5.82625833 28.1569388 3.53646105 29.49225845 1 31 C-0.42642027 32.19353533 -1.82212178 33.42458919 -3.1875 34.6875 C-11.33620203 42.01459736 -18.71891259 47.93447494 -29 52 C-27.70891809 48.60997279 -26.24218459 45.47839169 -24.453125 42.32421875 C-23.94434814 41.42453369 -23.43557129 40.52484863 -22.91137695 39.59790039 C-22.36312256 38.63746826 -21.81486816 37.67703613 -21.25 36.6875 C-20.6830542 35.69161865 -20.1161084 34.6957373 -19.53198242 33.66967773 C-18.32266925 31.54978399 -17.11126186 29.43108377 -15.89794922 27.31347656 C-14.61274272 25.06973813 -13.33060491 22.82423965 -12.05126953 20.57714844 C-10.14650934 17.23417766 -8.23112551 13.89752848 -6.3125 10.5625 C-5.71276367 9.50828857 -5.11302734 8.45407715 -4.49511719 7.36791992 C-3.93598633 6.40217041 -3.37685547 5.4364209 -2.80078125 4.44140625 C-2.30747314 3.58232666 -1.81416504 2.72324707 -1.3059082 1.83813477 C-0.8749585 1.23155029 -0.44400879 0.62496582 0 0 Z "
        fill="#D10000"
        transform="translate(49,13)"
      />
      <path
        d="M0 0 C0.66 0.66 1.32 1.32 2 2 C-0.31 4.31 -2.62 6.62 -5 9 C-5.99 8.67 -6.98 8.34 -8 8 C-5.36 5.36 -2.72 2.72 0 0 Z M-14 13 C-13.34 13.33 -12.68 13.66 -12 14 C-12.99 14.99 -13.98 15.98 -15 17 C-15.66 16.67 -16.32 16.34 -17 16 C-16.01 15.01 -15.02 14.02 -14 13 Z M-19 17 C-18.34 17.33 -17.68 17.66 -17 18 C-18.98 18.99 -18.98 18.99 -21 20 C-20.34 19.01 -19.68 18.02 -19 17 Z M-23 20 C-22.01 20.495 -22.01 20.495 -21 21 C-21.99 21.495 -21.99 21.495 -23 22 C-23 21.34 -23 20.68 -23 20 Z "
        fill="#C00000"
        transform="translate(60,32)"
      />
      <path
        d="M0 0 C0.66 0 1.32 0 2 0 C2.33 1.32 2.66 2.64 3 4 C0.03 6.475 0.03 6.475 -3 9 C-3.33 8.34 -3.66 7.68 -4 7 C-3.22265625 5.2734375 -3.22265625 5.2734375 -2.0625 3.375 C-1.381875 2.26125 -0.70125 1.1475 0 0 Z "
        fill="#BA0000"
        transform="translate(49,13)"
      />
    </svg>
  ),
  foxtraa: () => (
    <svg
      viewBox="0 0 90 90"
      xmlns="http://www.w3.org/2000/svg"
    >
      <defs>
        <linearGradient id="symbolGradient">
          <stop stopColor="#00ff8f" offset="0"></stop>
          <stop stopColor="#00a1ff" offset="1"></stop>
        </linearGradient>
      </defs>
      <g
        transform="matrix(0.31765870995044304,0,0,0.31765870995044304,-2.0882559067533086,-8.132063095908522)"
        fill="url(#symbolGradient)"
      >
        <path d="M36.2,127.7l128.4,0.4c3.5,0,6.7-1.9,8.5-4.9l17.7-30.4c1.5-2.6-0.4-5.9-3.4-5.9L58.2,86.5c-3.5,0-6.7,1.9-8.5,4.9L7.9,163.3c-1.7,3-1.8,6.8-0.1,9.8l64.2,112c1.5,2.6,5.3,2.6,6.8,0l17.7-30.4c1.7-3,1.8-6.8,0.1-9.8L32.8,133.6C31.3,131,33.2,127.7,36.2,127.7z"></path>
        <path d="M224.9,73.2l-64.6,110.9c-1.7,3-1.8,6.8-0.1,9.8l17.5,30.5c1.5,2.6,5.3,2.6,6.8,0l65.1-111.7c1.7-3,1.8-6.8,0.1-9.8l-41.3-72.1c-1.7-3-5-5-8.5-4.9L70.7,25.6c-3,0-4.9,3.3-3.4,5.9L84.7,62c1.7,3,5,5,8.5,4.9l128.4,0.4C224.6,67.4,226.4,70.7,224.9,73.2z"></path>
        <path d="M292.6,148.2l-35.2-0.1c-3.5,0-6.7,1.9-8.5,4.9l-64.6,110.9c-1.5,2.6-5.3,2.6-6.8,0l-63.7-111.2c-1.7-3-5-5-8.5-4.9l-35.2-0.1c-3,0-4.9,3.3-3.4,5.9l64.2,112c1.7,3,5,5,8.5,4.9l83.2,0.2c3.5,0,6.7-1.9,8.5-4.9L296,154.1C297.5,151.5,295.6,148.3,292.6,148.2z"></path>
      </g>
    </svg>
  ),
  multicharts: () => (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 40 28"
      fill="currentColo"
    >
      <path
        fillRule="evenodd"
        clipRule="evenodd"
        d="M0 16.3964C0 14.4459 0 13.2591 0 11.3077C0 10.3291 0.193026 10.0105 0.976087 9.5587L16.2774 1.0605C16.8581 0.73767 17.5569 1.13131 17.5569 1.85115C17.5569 3.80164 17.5569 4.98845 17.5569 6.93978C17.5569 7.9184 17.3639 8.23702 16.5825 8.68882L1.28038 17.187C0.699613 17.509 0.000842907 17.1162 0.000842907 16.3972L0 16.3964ZM52.6682 1.85621C52.6682 3.8067 52.6682 4.99351 52.6682 6.94484C52.6682 7.92346 52.4752 8.24208 51.693 8.69387C40.7411 14.7763 29.7883 20.8553 18.8348 26.9344C18.2532 27.2564 17.5552 26.8644 17.5552 26.1454C17.5552 24.1941 17.5552 23.0073 17.5552 21.056C17.5552 20.0773 17.7491 19.7587 18.5305 19.3069C29.4832 13.2279 40.436 7.14882 51.3878 1.0664C51.9686 0.74357 52.6682 1.13721 52.6682 1.85621ZM35.1121 26.1496C35.1121 24.1992 35.1121 23.0115 35.1121 21.061C35.1121 20.0816 35.3052 19.7638 36.0882 19.312L51.3887 10.8138C51.9695 10.491 52.6682 10.8846 52.6682 11.6036C52.6682 13.5541 52.6682 14.7409 52.6682 16.6922C52.6682 17.6708 52.4752 17.9895 51.693 18.4413L36.3917 26.9394C35.8101 27.2623 35.1121 26.8695 35.1121 26.1496ZM35.1121 1.85621C35.1121 3.8067 35.1121 4.99351 35.1121 6.94484C35.1121 7.92346 34.9183 8.24208 34.1369 8.69387C23.185 14.7763 12.2323 20.8553 1.27953 26.9344C0.69877 27.2564 0 26.8644 0 26.1454C0 24.1941 0 23.0073 0 21.056C0 20.0773 0.193026 19.7587 0.976087 19.3069C11.9288 13.2279 22.8816 7.14882 33.8335 1.0664C34.4142 0.74357 35.1121 1.13721 35.1121 1.85621Z"
        fill="#010101"
      />
    </svg>
  ),
  ninjatrader: () => (
    <svg
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="-10 -10 115 130 "
      fill="currentColor"
    >
      <path
        d="M0 0 C7.90600058 -1.37526326 16.70500126 -2.74788779 23.76123047 1.76660156 C29.47021605 6.61116503 34.28805033 12.20067732 39 18 C39.33 12.06 39.66 6.12 40 0 C59.8 0 79.6 0 100 0 C100 6.93 100 13.86 100 21 C93.73 21 87.46 21 81 21 C81 34.53 81 48.06 81 62 C40.73376623 64.27922078 40.73376623 64.27922078 32.203125 57.9921875 C27.73041725 53.80233874 24.24150077 49.18640123 21 44 C20.67 49.94 20.34 55.88 20 62 C13.4 62 6.8 62 0 62 C0 55.07 0 48.14 0 41 C8.415 40.505 8.415 40.505 17 40 C15.15921875 38.55947266 15.15921875 38.55947266 13.28125 37.08984375 C-0.22297428 25.66994559 -0.22297428 25.66994559 -1.12890625 16.75 C-1.24668932 11.12455934 -0.81520146 5.56476437 0 0 Z M42 21 C45.7301405 25.53665737 49.67053566 29.77941122 53.8125 33.9375 C54.30468018 34.43419189 54.79686035 34.93088379 55.30395508 35.44262695 C57.30629267 37.91331804 57.30629267 37.91331804 60 39 C60 33.06 60 27.12 60 21 C54.06 21 48.12 21 42 21 Z "
        fill="#FE4100"
        transform="translate(0,19)"
      />
    </svg>
  ),
  tradestation: () => (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 25 25"
      fill="currentColor"
    >
      <path
        d="M12.8087 7.82764L7.16382 23.6165C12.0631 23.6165 16.0571 19.6493 16.0571 14.7236C16.0571 11.9546 14.8057 9.47841 12.8087 7.82764Z"
        fill="#0693e3"
      />
      <path
        d="M15.3883 0.558594L13.4978 5.88366H17.8113C20.7403 5.88366 23.1367 3.51401 23.1367 0.558594H15.3883Z"
        fill="#0693e3"
      />
      <path
        d="M5.35196 0.558594C2.3964 0.558594 0 2.95487 0 5.91028H6.09751C5.61823 7.00192 5.35196 8.20006 5.35196 9.45145C5.35196 12.0075 6.41703 14.2973 8.14777 15.9214L13.6329 0.558594H5.35196Z"
        fill="#0693e3"
      />
    </svg>
  ),
  tradingview: () => (
    <svg viewBox="2 0 28 28" fill="#010101" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M14 22H7V11H0V4h14v18zM28 22h-8l7.5-18h8L28 22z"
        fill="#010101"
      ></path>
      <circle cx="20" cy="8" r="4" fill="#010101"></circle>
    </svg>
  ),
  babypips: () => (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 369.02 368.08"
      preserveAspectRatio="xMidYMid meet"
    >
      <path
        fill="#29bc1e"
        d="M180.83 1 99.7 47.82a7.32 7.32 0 0 0-3.7 6.34v93.67a7.32 7.32 0 0 0 3.66 6.34L180.83 201a7.32 7.32 0 0 0 7.32 0l81.12-46.84a7.32 7.32 0 0 0 3.66-6.34V54.16a7.32 7.32 0 0 0-3.66-6.34L188.15 1a7.32 7.32 0 0 0-7.32 0Z"
      ></path>
      <path
        fill="#29bc1e"
        d="M269.27 47.82 188.15 1a7.32 7.32 0 0 0-7.32 0L99.7 47.82a7.28 7.28 0 0 0-3.55 5.54 7.28 7.28 0 0 0 3.55 5.54l81.12 46.84a7.32 7.32 0 0 0 7.32 0l81.12-46.84a7.28 7.28 0 0 0 3.55-5.54 7.28 7.28 0 0 0-3.54-5.54Z"
      ></path>
      <path
        fill="#29bc1e"
        d="M84.79 167.06 3.66 213.9A7.32 7.32 0 0 0 0 220.24v93.67a7.32 7.32 0 0 0 3.66 6.34l81.12 46.84a7.32 7.32 0 0 0 7.32 0l81.12-46.84a7.32 7.32 0 0 0 3.66-6.34v-93.67a7.32 7.32 0 0 0-3.66-6.34l-81.11-46.84a7.32 7.32 0 0 0-7.32 0Z"
      ></path>
      <path
        fill="#29bc1e"
        d="m173.23 213.9-81.12-46.84a7.32 7.32 0 0 0-7.32 0L3.66 213.9a6.09 6.09 0 0 0 0 11.07l81.12 46.84a7.32 7.32 0 0 0 7.32 0L173.23 225a6.09 6.09 0 0 0 0-11.07Z"
      ></path>
      <path
        fill="#29bc1e"
        d="m276.91 167.06-81.12 46.84a7.32 7.32 0 0 0-3.66 6.34v93.67a7.32 7.32 0 0 0 3.66 6.34l81.12 46.84a7.32 7.32 0 0 0 7.32 0l81.12-46.84a7.32 7.32 0 0 0 3.66-6.34v-93.67a7.32 7.32 0 0 0-3.66-6.34l-81.12-46.84a7.32 7.32 0 0 0-7.32 0Z"
      ></path>
      <path
        fill="#29bc1e"
        d="m365.36 213.9-81.12-46.84a7.32 7.32 0 0 0-7.32 0l-81.13 46.84a6.09 6.09 0 0 0 0 11.07l81.12 46.84a7.32 7.32 0 0 0 7.32 0L365.36 225a6.09 6.09 0 0 0 0-11.07Z"
      ></path>
    </svg>
  ),
};
